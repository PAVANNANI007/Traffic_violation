<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Traffic Surveillance System</title>
    <link
      href="https://cdn.bootcss.com/bootstrap/4.0.0/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.bootcss.com/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script>
   const users = [
  { username: 'user1', password: 'password1' },
  { username: 'user2', password: 'password2' },
  { username: 'user3', password: 'password3' }
];

// Function to authenticate user
function authenticateUser(username, password) {
  // Check if the user exists in the database
  const user = users.find(user => user.username === username);

  if (user) {
    // Validate the password
    if (user.password === password) {
      return true; // Authentication successful
    }
  }

  return false; // Authentication failed
}

// Function to handle form submission
function login(event) {
  event.preventDefault(); // Prevent form submission

  const username = document.getElementById('username').value;
  const password = document.getElementById('password').value;

  if (authenticateUser(username, password)) {
    setMessage('Authentication successful!', 'green');
    window.location.href = '/main.html';
  } else {
    setMessage('Authentication failed!', 'red');
  }
}

// Function to display message
function setMessage(message, color) {
  const messageDiv = document.getElementById('message');
  messageDiv.textContent = message;
  messageDiv.style.color = color;
}
    </script>
    <link href="/static/css/styles2.css" rel="stylesheet" />
  </head>

  <body>
    <h1>Traffic Surveillance System</h1>
    <div class="user_form">
      <h3 style="text-decoration: underline">User Login</h3>
      <form id="loginForm" onsubmit="login(event)">
        <img class="kothi"
          src="static/assets/open_ibgr.png"
          alt="Gorilla with open eyes"
          id="gorilla-img"
        />

        <div>
          <input
            type="text"
            id="username"
            name="username"
            placeholder="username"
            required
          />
          <input
            type="password"
            id="password"
            name="password"
            placeholder="password"
            required
          />
          
        </div>
          <button type="submit" class="log" onclick="authenticateUser()">
            Login
          </button>
        
      </form>
      <div id="message"></div>
    </div>

    <script>
      const passwordInput = document.getElementById("password");
      const gorillaImg = document.getElementById("gorilla-img");

      passwordInput.addEventListener("input", () => {
        gorillaImg.src =
          passwordInput.value.length === 0
            ? "open_ibgr.png"
            : "static/assets/close_eyesbgr.png";
      });
     
    </script>
  </body>
</html>
